<app-navbar></app-navbar>
<app-sidebar></app-sidebar>


<main id="main" class="main">

  <div class="card">

    <div class="card-body">
      <br>
      <button id="bt" (click)="openCreateCat()" class="btn btn-primary m-1" ><i class="bi bi-plus-circle"></i> Create New Category</button>

      <!-- Table with stripped rows     -->
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">image</th>
            <th scope="col">Price</th>
            <th scope="col">Oprition</th>


          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let c of admin.categorys">
            <td id="td">{{c.name}}</td>
            <td>
              <img src="../../../assets/Images/Category/{{c.image}}" width="100px" height="70px" style="border-radius: 20px;"
                alt="image">
            </td>

            <td id="td">{{c.price}}</td>

            <td id="td">
              <button class="btn btn-primary m-1"(click)="OpenDetailsCat(c.categoryid)"><i class="bi bi-info-circle"></i></button>
              <button class="btn btn-danger m-1"(click)="openDeleteCat(c.categoryid)"><i class="bi bi-trash3"></i></button>
              <button class="btn btn-primary m-1"(click)="OPenUpdateCat(c)"><i class="bi bi-pencil-square"></i></button>
            </td>
            <ng-template #callDeleteDailog>
              <h1 mat-dialog-title>Delete Category</h1>
              <div mat-dialog-content>Are you sure you went to delete this item ?</div>
              <div mat-dialog-actions>
                <button mat-button mat-dialog-close="yes">Yes</button>
                <button mat-button mat-dialog-close="no">No</button>
              </div>
            </ng-template>


          </tr>
        </tbody>
      </table>
      <!-- End Table with stripped rows -->

    </div>
  </div>


<!-- call details dialog -->
<ng-template #callDetailsCat>
  <h4 mat-dialog-title>Category Name is: {{P_Data.name}} </h4>
  <h4 mat-dialog-title>Category price is: {{P_Data.price}} </h4>
  <div mat-dialog-content><img src="../../../assets/Images/Category/{{P_Data.image}}" width="100px"
      style="border-radius: 20px;" alt="image"></div>
  <div mat-dialog-actions>
    <button mat-button mat-dialog-close="no">OK</button>
  </div>
</ng-template>

<ng-template #callUpdateCat>

  <h2 mat-dialog-title>Update Category</h2>
  <mat-dialog-content class="mat-typography">

    <form [formGroup]="UpdateCategoryForm" class="example-form">
      <mat-form-field class="example-full-width">
        <mat-label>Category Name</mat-label>
        <input type="text" matInput formControlName="name" [(ngModel)]="p_Data.name">
      </mat-form-field>
      <br>
      <mat-form-field class="example-full-width">
        <mat-label>Category price</mat-label>
        <input type="text" matInput formControlName="price" [(ngModel)]="p_Data.price">
      </mat-form-field>
      <br>

      <input type="file" #file formControlName="image" (change)="UploadImage(file.files)" [(ngModel)]="p_Data.image">



    </form>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>Cancel</button>
    <button mat-button [mat-dialog-close]="true" cdkFocusInitial (click)="updatedCat()">Update</button>
  </mat-dialog-actions>


</ng-template>




